# Fly.io Configuration for Lanceboard-To-Go
# ===========================================
# This tells Fly.io how to run your chess server!

app = "lanceboard-to-go"
primary_region = "iad"

# This is CRITICAL - it tells Fly.io to run Python, not gunicorn!
[build]
  builder = "paketobuildpacks/builder:base"

# The actual command to start your server
# This overrides Fly's default (which was trying to use gunicorn)
[processes]
  web = "python server.py"

# HTTP service configuration
[[services]]
  internal_port = 8080
  protocol = "tcp"

  # Health check - makes sure your app is running
  [[services.http_checks]]
    interval = "30s"
    timeout = "5s"
    path = "/"

  # HTTP handler
  [[services.ports]]
    port = 80
    handlers = ["http"]

  [[services.ports]]
    port = 443
    handlers = ["tls", "http"]

# Environment variables
[env]
  PORT = "8080"

# VM resources - free tier
[vm]
  memory = '256mb'
  cpu_kind = 'shared'
  cpus = 1
